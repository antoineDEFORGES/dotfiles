# Hyprland Config
# Machine-specific settings (monitor, GPU) in ~/.config/hypr/local.conf

source = ~/.config/hypr/local.conf

# WAYLAND
env = XDG_SESSION_TYPE,wayland
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_DESKTOP,Hyprland

# QT
env = GDK_BACKEND,wayland,x11,*
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1

# FIREFOX
env = MOZ_ENABLE_WAYLAND,1

# ELECTRON
env = ELECTRON_OZONE_PLATFORM_HINT,auto

# CURSOR
env = HYPRCURSOR_THEME,rose-pine-cursor
env = HYPRCURSOR_SIZE,24

# AUTO START
exec-once = waybar
exec-once = hyprpaper

# BINDINGS
$mod = SUPER

bind = $mod, Return, exec, kitty
bind = $mod, Q, killactive
bind = $mod, M, exit
bind = $mod, V, togglefloating
bind = $mod, F, fullscreen
bind = $mod, D, exec, rofi -show drun
bind = $mod SHIFT, R, exec, hyprctl reload
bind = $mod, S, exec, hyprshot -m region --clipboard-only
bind = $mod, W, exec, pkill waybar && waybar &
bind = $mod SHIFT, L, exec, hyprlock
bind = $mod SHIFT, F, togglefloating

# WORKSPACES
bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5

bind = $mod SHIFT, 1, movetoworkspace, 1
bind = $mod SHIFT, 2, movetoworkspace, 2
bind = $mod SHIFT, 3, movetoworkspace, 3
bind = $mod SHIFT, 4, movetoworkspace, 4
bind = $mod SHIFT, 5, movetoworkspace, 5

# FOCUS
bind = $mod, H, movefocus, l
bind = $mod, L, movefocus, r
bind = $mod, K, movefocus, u
bind = $mod, J, movefocus, d

# MOUSE
bindm = $mod, mouse:272, movewindow
bindm = $mod, mouse:273, resizewindow

# TMUX SESSION SWITCH
bind = $mod, Tab, exec, bash -c '[[ "$(hyprctl activewindow -j | jq -r ".class")" == "kitty" ]] && tmux switch-client -n'
bind = $mod SHIFT, Tab, exec, bash -c '[[ "$(hyprctl activewindow -j | jq -r ".class")" == "kitty" ]] && tmux switch-client -p'

input {
    accel_profile = flat
}

# APP RULES
windowrulev2 = opacity 0.85 0.75, class:^(kitty)$
windowrulev2 = opacity 0.9 0.85, class:^(firefox)$
windowrulev2 = opacity 0.85 0.8, class:^(code)$
windowrulev2 = opacity 0.9 0.9, class:^(thunar)$

# APPEARANCE
general {
    gaps_out = 10
}

animations {
    enabled = false
}

decoration {
    rounding = 10
    active_opacity = 0.95
    inactive_opacity = 0.85
    fullscreen_opacity = 1.0

    shadow {
        enabled = true
        range = 20
        render_power = 3
        color = rgba(00000077)
    }

    blur {
        enabled = true
        size = 8
        passes = 2
        new_optimizations = true
        xray = false
        noise = 0.01
        contrast = 1.0
        brightness = 1.0
    }
}
